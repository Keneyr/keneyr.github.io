<!DOCTYPE html>
<html  lang="en">
<head>
    <meta charset="utf-8" />

<meta name="generator" content="Hexo 4.2.1" />

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

<title>Paper-Learned-Motion-Matching - QinranY&#39;s Homepage</title>


    <meta name="description" content="Keywords: Neural Network, Generative Models, Memory, 2020">
<meta property="og:type" content="article">
<meta property="og:title" content="Paper-Learned-Motion-Matching">
<meta property="og:url" content="https://keneyr.com/Paper/Motion-Control/Paper-Learned-Motion-Matching/index.html">
<meta property="og:site_name" content="QinranY&#39;s Homepage">
<meta property="og:description" content="Keywords: Neural Network, Generative Models, Memory, 2020">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://keneyr.com/images/og_image.png">
<meta property="article:published_time" content="2024-02-21T07:49:31.000Z">
<meta property="article:modified_time" content="2024-02-26T03:41:51.917Z">
<meta property="article:author" content="Keneyr">
<meta property="article:tag" content="Motion Control">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://keneyr.com/images/og_image.png">








<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/vs2015.css">


    
    
<style>body>.footer,body>.navbar,body>.section{opacity:0}</style>

    
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">

    
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css">

    
    
    
    
<link rel="stylesheet" href="/css/back-to-top.css">

    
    
    
    
    
    
    
    <link rel="stylesheet" href="/css/progressbar.css">
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>
    
    <script async="" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    


<link rel="stylesheet" href="/css/style.css">
</head>
<body class="is-2-column">
    <nav class="navbar navbar-main">
    <div class="container">
        <div class="navbar-brand is-flex-center">
            <a class="navbar-item navbar-logo" href="/">
            
                <img src="/images/beauty.jpg" alt="Paper-Learned-Motion-Matching" height="28">
            
            </a>
        </div>
        <div class="navbar-menu">
            
            <div class="navbar-start">
                
                <a class="navbar-item"
                href="/">Home</a>
                
                <a class="navbar-item"
                href="/categories">Categories</a>
                
                <a class="navbar-item"
                href="/tags">Tags</a>
                
                <a class="navbar-item"
                href="/about">About</a>
                
                <a class="navbar-item"
                href="/publication">Publication</a>
                
                <a class="navbar-item"
                href="/projects">Projects</a>
                
                <a class="navbar-item"
                href="/life">Life</a>
                
                <a class="navbar-item"
                href="/work">Work</a>
                
                <a class="navbar-item"
                href="/Animation">Animation</a>
                
                <a class="navbar-item"
                href="/archives">Archives</a>
                
                <a class="navbar-item"
                href="/CV">CV</a>
                
                <a class="navbar-item"
                href="/extra">Extra</a>
                
            </div>
            
            <div class="navbar-end">
                
                    
                    <a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Keneyr">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                    
                
                
                <a class="navbar-item is-hidden-tablet catalogue" title="Catalogue" href="javascript:;">
                    <i class="fas fa-list-ul"></i>
                </a>
                
                
                <a class="navbar-item search" title="Search" href="javascript:;">
                    <i class="fas fa-search"></i>
                </a>
                
            </div>
        </div>
    </div>
</nav>
    
    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column is-8-tablet is-8-desktop is-9-widescreen has-order-2 column-main">
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2024-02-21T07:49:31.000Z">2024-02-21</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Paper/">Paper</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/Paper/Motion-Control/">Motion Control</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    15 minutes read (About 2196 words)
                </span>
                
                
                <span class="level-item has-text-grey" id="busuanzi_container_page_pv">
                    <i class="far fa-eye"></i>
                    <span id="busuanzi_value_page_pv">0</span> visits
                </span>
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                Paper-Learned-Motion-Matching
            
        </h1>
        <div class="content">
            <p><strong><em>Keywords</em></strong>: Neural Network, Generative Models, Memory, 2020</p>
<a id="more"></a>

<p><strong><em>Learned Motion Matching_SIGGRAPH_2020</em></strong></p>
<p>DANIEL HOLDEN, Ubisoft La Forge, Ubisoft, Canada</p>
<p>OUSSAMA KANOUN, Ubisoft La Forge, Ubisoft, Canada</p>
<p>MAKSYM PEREPICHKA, Concordia University, Canada</p>
<p>TIBERIU POPA, Concordia University, Canada</p>
<p>Code: <a href="https://github.com/orangeduck/Motion-Matching">https://github.com/orangeduck/Motion-Matching</a></p>
<h2 id="WorkFlow"><a href="#WorkFlow" class="headerlink" title="WorkFlow"></a>WorkFlow</h2><p><img src="/images/ReadingPaper/ubisoft_Daniel/LearnedMotionMatching/overview.png" alt="Overview"></p>
<h3 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h3><p>The primary limitation of Motion Matching is that the memory usage (and run time performance to some degree) scale linearly with the amount of data that is provided and the number of features to be matched.</p>
<h3 id="Inspiration"><a href="#Inspiration" class="headerlink" title="Inspiration"></a>Inspiration</h3><p>Recent methods have shown that neural-network-based models can be effectively applied to generate realistic motion in a number of difficult cases including navigation over rough terrain [Holden et al. 2017], quadruped motion [Zhang et al. 2018], and interactions with the environment or other characters [Lee et al. 2018; Starke et al. 2019].</p>
<p>Yet, such models are often difficut to control, have unpredictable behaviour, long training times, and can produce animation of lower quality than that of the original training set.</p>
<h2 id="Methods"><a href="#Methods" class="headerlink" title="Methods"></a>Methods</h2><h3 id="Basic-Motion-Matching"><a href="#Basic-Motion-Matching" class="headerlink" title="Basic Motion Matching"></a>Basic Motion Matching</h3><ol>
<li>a feature vector $\pmb{x}$, which describes the features we wish to match at each frame.<br>$$<br>\pmb{x} = \lbrace \pmb{t^t} \pmb{t^d} \pmb{f^t} \pmb{\dot{f}^t} \pmb{\dot{h}^t}\rbrace \in R^{27}<br>$$</li>
</ol>
<p>$\pmb{t^t} \in R^6$, 2D future trajectory positions projected on the ground, 20, 40, and 60 frames in the future (at 60Hz) local to the character.</p>
<p>$\pmb{t^d} \in R^6$, the future trajectory facing directions 20, 40, and 60 frames in the future local to the character.</p>
<p>$\pmb{f^t} \in R^6$, the two foot joint positions local to the character.</p>
<p>$\pmb{\dot{f}^t} \in R^6$, the two foot joint velocities local to the character.</p>
<p>$\pmb{\dot{h}^t} \in R^3$, the hip joint velocity local to the character.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">database_build_matching_features</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    database&amp; db,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">const</span> <span class="keyword">float</span> feature_weight_foot_position,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">const</span> <span class="keyword">float</span> feature_weight_foot_velocity,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">const</span> <span class="keyword">float</span> feature_weight_hip_velocity,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">const</span> <span class="keyword">float</span> feature_weight_trajectory_positions,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">const</span> <span class="keyword">float</span> feature_weight_trajectory_directions)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> nfeatures = </span><br><span class="line">        <span class="number">3</span> + <span class="comment">// Left Foot Position</span></span><br><span class="line">        <span class="number">3</span> + <span class="comment">// Right Foot Position </span></span><br><span class="line">        <span class="number">3</span> + <span class="comment">// Left Foot Velocity</span></span><br><span class="line">        <span class="number">3</span> + <span class="comment">// Right Foot Velocity</span></span><br><span class="line">        <span class="number">3</span> + <span class="comment">// Hip Velocity</span></span><br><span class="line">        <span class="number">6</span> + <span class="comment">// Trajectory Positions 2D</span></span><br><span class="line">        <span class="number">6</span> ; <span class="comment">// Trajectory Directions 2D</span></span><br><span class="line">        </span><br><span class="line">    db.features.resize(db.nframes(), nfeatures);</span><br><span class="line">    db.features_offset.resize(nfeatures);</span><br><span class="line">    db.features_scale.resize(nfeatures);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">int</span> offset = <span class="number">0</span>;</span><br><span class="line">    compute_bone_position_feature(db, offset, Bone_LeftFoot, feature_weight_foot_position);</span><br><span class="line">    compute_bone_position_feature(db, offset, Bone_RightFoot, feature_weight_foot_position);</span><br><span class="line">    compute_bone_velocity_feature(db, offset, Bone_LeftFoot, feature_weight_foot_velocity);</span><br><span class="line">    compute_bone_velocity_feature(db, offset, Bone_RightFoot, feature_weight_foot_velocity);</span><br><span class="line">    compute_bone_velocity_feature(db, offset, Bone_Hips, feature_weight_hip_velocity);</span><br><span class="line">    compute_trajectory_position_feature(db, offset, feature_weight_trajectory_positions);</span><br><span class="line">    compute_trajectory_direction_feature(db, offset, feature_weight_trajectory_directions);</span><br><span class="line">    </span><br><span class="line">    assert(offset == nfeatures);</span><br><span class="line">    </span><br><span class="line">    database_build_bounds(db);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Normalizing the features: scale each feature (e.g. left foot position) by its standard deviation.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Z-score normalization: (x - mu) / std</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">normalize_feature</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    slice2d&lt;<span class="keyword">float</span>&gt; features,</span></span></span><br><span class="line"><span class="function"><span class="params">    slice1d&lt;<span class="keyword">float</span>&gt; features_offset,</span></span></span><br><span class="line"><span class="function"><span class="params">    slice1d&lt;<span class="keyword">float</span>&gt; features_scale,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">const</span> <span class="keyword">int</span> offset, </span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">const</span> <span class="keyword">int</span> <span class="built_in">size</span>, </span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">const</span> <span class="keyword">float</span> weight = <span class="number">1.0f</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// First compute what is essentially the mean </span></span><br><span class="line">    <span class="comment">// value for each feature dimension</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="built_in">size</span>; j++)</span><br><span class="line">    &#123;</span><br><span class="line">        features_offset(offset + j) = <span class="number">0.0f</span>;    </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; features.rows; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="built_in">size</span>; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            features_offset(offset + j) += features(i, offset + j) / features.rows;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Now compute the variance of each feature dimension</span></span><br><span class="line">    <span class="function">array1d&lt;<span class="keyword">float</span>&gt; <span class="title">vars</span><span class="params">(<span class="built_in">size</span>)</span></span>;</span><br><span class="line">    vars.zero();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; features.rows; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="built_in">size</span>; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            vars(j) += squaref(features(i, offset + j) - features_offset(offset + j)) / features.rows;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// We compute the overall std of the feature as the average</span></span><br><span class="line">    <span class="comment">// std across all dimensions</span></span><br><span class="line">    <span class="keyword">float</span> <span class="built_in">std</span> = <span class="number">0.0f</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="built_in">size</span>; j++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">std</span> += sqrtf(vars(j)) / <span class="built_in">size</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Features with no variation can have zero std which is</span></span><br><span class="line">    <span class="comment">// almost always a bug.</span></span><br><span class="line">    assert(<span class="built_in">std</span> &gt; <span class="number">0.0</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// The scale of a feature is just the std divided by the weight</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="built_in">size</span>; j++)</span><br><span class="line">    &#123;</span><br><span class="line">        features_scale(offset + j) = <span class="built_in">std</span> / weight;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Using the offset and scale we can then normalize the features</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; features.rows; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="built_in">size</span>; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            features(i, offset + j) = (features(i, offset + j) - features_offset(offset + j)) / features_scale(offset + j);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>a pose vector $\pmb{y}$, which contains all the pose information for a single frame of animation.</li>
</ol>
<p>$$<br>\pmb{y} = \lbrace \pmb{y^t} \pmb{y^r} \pmb{\dot{y}^t} \pmb{\dot{y}^r} \pmb{\dot{r}^t} \pmb{\dot{r}^r} \pmb{o^{\ast}}\rbrace<br>$$</p>
<p>$\pmb{y^t} \pmb{y^r}$ are the joint local translations and rotations, local to the character forward facing direction.</p>
<p>$\pmb{\dot{y}^t} \pmb{\dot{y}^r}$ are the joint local translational and rotational velocities, local to the character forward facing direction.</p>
<p>$\pmb{\dot{r}^t} \pmb{\dot{r}^r}$ are the character root translational and rotational velocity, local to the character forward facing direction.</p>
<p>$\pmb{o^{\ast}}$ are all the other additional task specific outputs, such as foot contact information, the position or trajectory of other characters in the scene, or the future positions of some joints of the character.</p>
<ol start="3">
<li><em>Motion Database</em>: $\pmb{X} = [\pmb{x_0}, \pmb{x_1}, \cdots, \pmb{x_{n-1}}]$</li>
</ol>
<p><em>Animation Database</em>: $\pmb{Y} = [\pmb{y_0}, \pmb{y_1}, \cdots, \pmb{y_{n-1}}]$</p>
<ol start="4">
<li>at runtime, every $N$ frames, or when the user input changes significantly, a query vector $\pmb{\hat{x}}$ is constructed which contains the desired feature vector. To control the features corresponding to the future trajectory position and direction we use a <u>spring-damper based system</u> which generates a desired velocity and direction based on the current state of the joystick.</li>
</ol>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* convert the gamepad stick direction into a desired target velocity in the world space, </span></span><br><span class="line"><span class="comment">* allowing for separate speeds for forward, backward, and sideways movement</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">vec3 <span class="title">desired_velocity_update</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">const</span> vec3 gamepadstick_left,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">const</span> <span class="keyword">float</span> camera_azimuth,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">const</span> quat simulation_rotation,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">const</span> <span class="keyword">float</span> fwrd_speed,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">const</span> <span class="keyword">float</span> side_speed,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">const</span> <span class="keyword">float</span> back_speed)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// Find stick position in world space by rotating using camera azimuth</span></span><br><span class="line">    vec3 global_stick_direction = quat_mul_vec3(</span><br><span class="line">        quat_from_angle_axis(camera_azimuth, vec3(<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>)), gamepadstick_left);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Find stick position local to current facing direction</span></span><br><span class="line">    vec3 local_stick_direction = quat_inv_mul_vec3(</span><br><span class="line">        simulation_rotation, global_stick_direction);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Scale stick by forward, sideways and backwards speeds</span></span><br><span class="line">    vec3 local_desired_velocity = local_stick_direction.z &gt; <span class="number">0.0</span> ?</span><br><span class="line">        vec3(side_speed, <span class="number">0.0f</span>, fwrd_speed) * local_stick_direction :</span><br><span class="line">        vec3(side_speed, <span class="number">0.0f</span>, back_speed) * local_stick_direction;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Re-orientate into the world space</span></span><br><span class="line">    <span class="keyword">return</span> quat_mul_vec3(simulation_rotation, local_desired_velocity);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">quat <span class="title">desired_rotation_update</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">const</span> quat desired_rotation,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">const</span> vec3 gamepadstick_left,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">const</span> vec3 gamepadstick_right,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">const</span> <span class="keyword">float</span> camera_azimuth,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">const</span> <span class="keyword">bool</span> desired_strafe,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">const</span> vec3 desired_velocity)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    quat desired_rotation_curr = desired_rotation;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// If strafe is active then desired direction is coming from right</span></span><br><span class="line">    <span class="comment">// stick as long as that stick is being used, otherwise we assume</span></span><br><span class="line">    <span class="comment">// forward facing</span></span><br><span class="line">    <span class="keyword">if</span> (desired_strafe)</span><br><span class="line">    &#123;</span><br><span class="line">        vec3 desired_direction = quat_mul_vec3(quat_from_angle_axis(camera_azimuth, vec3(<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>)), vec3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">-1</span>));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (length(gamepadstick_right) &gt; <span class="number">0.01f</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            desired_direction = quat_mul_vec3(quat_from_angle_axis(camera_azimuth, vec3(<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>)), normalize(gamepadstick_right));</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> quat_from_angle_axis(atan2f(desired_direction.x, desired_direction.z), vec3(<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>));            </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// If strafe is not active the desired direction comes from the left </span></span><br><span class="line">    <span class="comment">// stick as long as that stick is being used</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (length(gamepadstick_left) &gt; <span class="number">0.01f</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        </span><br><span class="line">        vec3 desired_direction = normalize(desired_velocity);</span><br><span class="line">        <span class="keyword">return</span> quat_from_angle_axis(atan2f(desired_direction.x, desired_direction.z), vec3(<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Otherwise desired direction remains the same</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> desired_rotation_curr;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>find the entry in the Matching Database which minimizes the squared euclidean distance to the query vector.<br>$$<br>k^{\ast} = \underbrace{argmin}_{k} ||\pmb{\hat{x}} - \pmb{x_k}||^2<br>$$</li>
</ol>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Motion Matching search function essentially consists</span></span><br><span class="line"><span class="comment">// of comparing every feature vector in the database, </span></span><br><span class="line"><span class="comment">// against the query feature vector, first checking the </span></span><br><span class="line"><span class="comment">// query distance to the axis aligned bounding boxes used </span></span><br><span class="line"><span class="comment">// for the acceleration structure.</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">motion_matching_search</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">int</span>&amp; __restrict__ best_index, </span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">float</span>&amp; __restrict__ best_cost, </span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">const</span> slice1d&lt;<span class="keyword">int</span>&gt; range_starts,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">const</span> slice1d&lt;<span class="keyword">int</span>&gt; range_stops,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">const</span> slice2d&lt;<span class="keyword">float</span>&gt; features,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">const</span> slice1d&lt;<span class="keyword">float</span>&gt; features_offset,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">const</span> slice1d&lt;<span class="keyword">float</span>&gt; features_scale,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">const</span> slice2d&lt;<span class="keyword">float</span>&gt; bound_sm_min,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">const</span> slice2d&lt;<span class="keyword">float</span>&gt; bound_sm_max,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">const</span> slice2d&lt;<span class="keyword">float</span>&gt; bound_lr_min,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">const</span> slice2d&lt;<span class="keyword">float</span>&gt; bound_lr_max,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">const</span> slice1d&lt;<span class="keyword">float</span>&gt; query_normalized,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">const</span> <span class="keyword">float</span> transition_cost,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">const</span> <span class="keyword">int</span> ignore_range_end,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">const</span> <span class="keyword">int</span> ignore_surrounding)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> nfeatures = query_normalized.<span class="built_in">size</span>;</span><br><span class="line">    <span class="keyword">int</span> nranges = range_starts.<span class="built_in">size</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">int</span> curr_index = best_index;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Find cost for current frame</span></span><br><span class="line">    <span class="keyword">if</span> (best_index != <span class="number">-1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        best_cost = <span class="number">0.0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nfeatures; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            best_cost += squaref(query_normalized(i) - features(best_index, i));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">float</span> curr_cost = <span class="number">0.0f</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Search rest of database</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> r = <span class="number">0</span>; r &lt; nranges; r++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// Exclude end of ranges from search    </span></span><br><span class="line">        <span class="keyword">int</span> i = range_starts(r);</span><br><span class="line">        <span class="keyword">int</span> range_end = range_stops(r) - ignore_range_end;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span> (i &lt; range_end)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// Find index of current and next large box</span></span><br><span class="line">            <span class="keyword">int</span> i_lr = i / BOUND_LR_SIZE;</span><br><span class="line">            <span class="keyword">int</span> i_lr_next = (i_lr + <span class="number">1</span>) * BOUND_LR_SIZE;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// Find distance to box</span></span><br><span class="line">            curr_cost = transition_cost;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; nfeatures; j++)</span><br><span class="line">            &#123;</span><br><span class="line">                curr_cost += squaref(query_normalized(j) - clampf(query_normalized(j), </span><br><span class="line">                    bound_lr_min(i_lr, j), bound_lr_max(i_lr, j)));</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">if</span> (curr_cost &gt;= best_cost)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// If distance is greater than current best jump to next box</span></span><br><span class="line">            <span class="keyword">if</span> (curr_cost &gt;= best_cost)</span><br><span class="line">            &#123;</span><br><span class="line">                i = i_lr_next;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// Check against small box</span></span><br><span class="line">            <span class="keyword">while</span> (i &lt; i_lr_next &amp;&amp; i &lt; range_end)</span><br><span class="line">            &#123;   </span><br><span class="line">                <span class="comment">// Find index of current and next small box</span></span><br><span class="line">                <span class="keyword">int</span> i_sm = i / BOUND_SM_SIZE;</span><br><span class="line">                <span class="keyword">int</span> i_sm_next = (i_sm + <span class="number">1</span>) * BOUND_SM_SIZE;</span><br><span class="line">                </span><br><span class="line">                <span class="comment">// Find distance to box</span></span><br><span class="line">                curr_cost = transition_cost;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; nfeatures; j++)</span><br><span class="line">                &#123;</span><br><span class="line">                    curr_cost += squaref(query_normalized(j) - clampf(query_normalized(j), </span><br><span class="line">                        bound_sm_min(i_sm, j), bound_sm_max(i_sm, j)));</span><br><span class="line">                    </span><br><span class="line">                    <span class="keyword">if</span> (curr_cost &gt;= best_cost)</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                </span><br><span class="line">                <span class="comment">// If distance is greater than current best jump to next box</span></span><br><span class="line">                <span class="keyword">if</span> (curr_cost &gt;= best_cost)</span><br><span class="line">                &#123;</span><br><span class="line">                    i = i_sm_next;</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                </span><br><span class="line">                <span class="comment">// Search inside small box</span></span><br><span class="line">                <span class="keyword">while</span> (i &lt; i_sm_next &amp;&amp; i &lt; range_end)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="comment">// Skip surrounding frames</span></span><br><span class="line">                    <span class="keyword">if</span> (curr_index != - <span class="number">1</span> &amp;&amp; <span class="built_in">abs</span>(i - curr_index) &lt; ignore_surrounding)</span><br><span class="line">                    &#123;</span><br><span class="line">                        i++;</span><br><span class="line">                        <span class="keyword">continue</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    </span><br><span class="line">                    <span class="comment">// Check against each frame inside small box</span></span><br><span class="line">                    curr_cost = transition_cost;</span><br><span class="line">                    <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; nfeatures; j++)</span><br><span class="line">                    &#123;</span><br><span class="line">                        curr_cost += squaref(query_normalized(j) - features(i, j));</span><br><span class="line">                        <span class="keyword">if</span> (curr_cost &gt;= best_cost)</span><br><span class="line">                        &#123;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    </span><br><span class="line">                    <span class="comment">// If cost is lower than current best then update best</span></span><br><span class="line">                    <span class="keyword">if</span> (curr_cost &lt; best_cost)</span><br><span class="line">                    &#123;</span><br><span class="line">                        best_index = i;</span><br><span class="line">                        best_cost = curr_cost;</span><br><span class="line">                    &#125;</span><br><span class="line">                    </span><br><span class="line">                    i++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="6">
<li>Once found, if the current frame $i$ does not match the nearest frame, $i$ , $k^{\ast}$, then animation playback continues from this point $i := k^{\ast}$, and a transition is inserted using <u>inertialization blending</u> [Bollo 2016, 2017].</li>
</ol>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">inertialize_pose_transition</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    slice1d&lt;vec3&gt; bone_offset_positions,</span></span></span><br><span class="line"><span class="function"><span class="params">    slice1d&lt;vec3&gt; bone_offset_velocities,</span></span></span><br><span class="line"><span class="function"><span class="params">    slice1d&lt;quat&gt; bone_offset_rotations,</span></span></span><br><span class="line"><span class="function"><span class="params">    slice1d&lt;vec3&gt; bone_offset_angular_velocities,</span></span></span><br><span class="line"><span class="function"><span class="params">    vec3&amp; transition_src_position,</span></span></span><br><span class="line"><span class="function"><span class="params">    quat&amp; transition_src_rotation,</span></span></span><br><span class="line"><span class="function"><span class="params">    vec3&amp; transition_dst_position,</span></span></span><br><span class="line"><span class="function"><span class="params">    quat&amp; transition_dst_rotation,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">const</span> vec3 root_position,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">const</span> vec3 root_velocity,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">const</span> quat root_rotation,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">const</span> vec3 root_angular_velocity,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">const</span> slice1d&lt;vec3&gt; bone_src_positions,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">const</span> slice1d&lt;vec3&gt; bone_src_velocities,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">const</span> slice1d&lt;quat&gt; bone_src_rotations,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">const</span> slice1d&lt;vec3&gt; bone_src_angular_velocities,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">const</span> slice1d&lt;vec3&gt; bone_dst_positions,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">const</span> slice1d&lt;vec3&gt; bone_dst_velocities,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">const</span> slice1d&lt;quat&gt; bone_dst_rotations,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">const</span> slice1d&lt;vec3&gt; bone_dst_angular_velocities)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// First we record the root position and rotation</span></span><br><span class="line">    <span class="comment">// in the animation data for the source and destination</span></span><br><span class="line">    <span class="comment">// animation</span></span><br><span class="line">    transition_dst_position = root_position;</span><br><span class="line">    transition_dst_rotation = root_rotation;</span><br><span class="line">    transition_src_position = bone_dst_positions(<span class="number">0</span>);</span><br><span class="line">    transition_src_rotation = bone_dst_rotations(<span class="number">0</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// We then find the velocities so we can transition the </span></span><br><span class="line">    <span class="comment">// root inertiaizers</span></span><br><span class="line">    vec3 world_space_dst_velocity = quat_mul_vec3(transition_dst_rotation, </span><br><span class="line">        quat_inv_mul_vec3(transition_src_rotation, bone_dst_velocities(<span class="number">0</span>)));</span><br><span class="line">    </span><br><span class="line">    vec3 world_space_dst_angular_velocity = quat_mul_vec3(transition_dst_rotation, </span><br><span class="line">        quat_inv_mul_vec3(transition_src_rotation, bone_dst_angular_velocities(<span class="number">0</span>)));</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Transition inertializers recording the offsets for </span></span><br><span class="line">    <span class="comment">// the root joint</span></span><br><span class="line">    inertialize_transition(</span><br><span class="line">        bone_offset_positions(<span class="number">0</span>),</span><br><span class="line">        bone_offset_velocities(<span class="number">0</span>),</span><br><span class="line">        root_position,</span><br><span class="line">        root_velocity,</span><br><span class="line">        root_position,</span><br><span class="line">        world_space_dst_velocity);</span><br><span class="line">        </span><br><span class="line">    inertialize_transition(</span><br><span class="line">        bone_offset_rotations(<span class="number">0</span>),</span><br><span class="line">        bone_offset_angular_velocities(<span class="number">0</span>),</span><br><span class="line">        root_rotation,</span><br><span class="line">        root_angular_velocity,</span><br><span class="line">        root_rotation,</span><br><span class="line">        world_space_dst_angular_velocity);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Transition all the inertializers for each other bone</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; bone_offset_positions.<span class="built_in">size</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        inertialize_transition(</span><br><span class="line">            bone_offset_positions(i),</span><br><span class="line">            bone_offset_velocities(i),</span><br><span class="line">            bone_src_positions(i),</span><br><span class="line">            bone_src_velocities(i),</span><br><span class="line">            bone_dst_positions(i),</span><br><span class="line">            bone_dst_velocities(i));</span><br><span class="line">            </span><br><span class="line">        inertialize_transition(</span><br><span class="line">            bone_offset_rotations(i),</span><br><span class="line">            bone_offset_angular_velocities(i),</span><br><span class="line">            bone_src_rotations(i),</span><br><span class="line">            bone_src_angular_velocities(i),</span><br><span class="line">            bone_dst_rotations(i),</span><br><span class="line">            bone_dst_angular_velocities(i));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Learned-Motion-Matching"><a href="#Learned-Motion-Matching" class="headerlink" title="Learned Motion Matching"></a>Learned Motion Matching</h3><p>the Motion Matching algorithm consists of three key stages: </p>
<ol>
<li><p>Projection: where a <u>nearest neighbor search</u> is used to find the feature vector in the Matching Database which best matches the query vector.</p>
</li>
<li><p>Stepping: where we advance forward the index in the <em>Matching Database</em>.</p>
</li>
<li><p>Decompression: where we look up the associated pose in the <em>Animation Database</em> which corresponds to our current index in the <em>Matching Database</em>.</p>
</li>
</ol>
<h4 id="Decompressor"><a href="#Decompressor" class="headerlink" title="Decompressor"></a>Decompressor</h4><p><img src="/images/ReadingPaper/ubisoft_Daniel/LearnedMotionMatching/decompressor.png" alt="decompressor"></p>
<h4 id="Stepper"><a href="#Stepper" class="headerlink" title="Stepper"></a>Stepper</h4><p><img src="/images/ReadingPaper/ubisoft_Daniel/LearnedMotionMatching/stepper.png" alt="stepper"></p>
<h4 id="Projector"><a href="#Projector" class="headerlink" title="Projector"></a>Projector</h4><p><img src="/images/ReadingPaper/ubisoft_Daniel/LearnedMotionMatching/projector.png" alt="projector"></p>

        </div>
        
        <div class="level is-size-7 is-uppercase">
            <div class="level-start">
                <div class="level-item">
                    <span class="is-size-6 has-text-grey has-mr-7">#</span>
                    <a class="has-link-grey -link" href="/tags/Motion-Control/" rel="tag">Motion Control</a>
                </div>
            </div>
        </div>
        
        
        
        
<div class="sharethis-inline-share-buttons"></div>
<script type='text/javascript' src='//platform-api.sharethis.com/js/sharethis.js#property=5e58d41ecdbda60012fcd87d&amp;product=inline-share-buttons&amp;cms=sop' async='async'></script>

        
    </div>
</div>



<div class="card">
    <div class="card-content">
        <h3 class="menu-label has-text-centered">Like this article? Support the author with</h3>
        <div class="buttons is-centered">
            
                
<a class="button is-info donate">
    <span class="icon is-small">
        <i class="fab fa-alipay"></i>
    </span>
    <span>Alipay</span>
    <div class="qrcode"><img src="/images/Alipay.jpg" alt="Alipay"></div>
</a>

                
                
<a class="button is-success donate">
    <span class="icon is-small">
        <i class="fab fa-weixin"></i>
    </span>
    <span>Wechat</span>
    <div class="qrcode"><img src="/images/Wechatpay.jpg" alt="Wechat"></div>
</a>

                
        </div>
    </div>
</div>



<div class="card card-transparent">
    <div class="level post-navigation is-flex-wrap is-mobile">
        
        
        <div class="level-end">
            <a class="level level-item has-link-grey  article-nav-next" href="/Paper/Human-Pose/Paper-MAPConNet-SelfSupervised-3D-Pose-Transfer-with-Mesh-and-Point-ConstrastiveLearning/">
                <span class="level-item">Paper-MAPConNet-SelfSupervised-3D-Pose-Transfer-with-Mesh-and-Point-ConstrastiveLearning</span>
                <i class="level-item fas fa-chevron-right"></i>
            </a>
        </div>
        
    </div>
</div>



<div class="card">
    <div class="card-content">
        <h3 class="title is-5 has-text-weight-normal">Comments</h3>
        
<div id="comment-container"></div>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.4.1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1.4.1/dist/gitalk.min.js"></script>
<script>
    var gitalk = new Gitalk({
        clientID: 'f7d6d05297c7a1b94ee1',
        clientSecret: 'f3c964e1d94edd347ea044c1bc1ecdadac432326',
        id: 'bd2c8ad323d9432394c0973b63478fa7',
        repo: 'keneyr.github.io',
        owner: 'Keneyr',
        admin: "Keneyr",
        createIssueManually: false,
        distractionFreeMode: false
    })
    gitalk.render('comment-container')
</script>

    </div>
</div>
</div>
                




<div class="column is-4-tablet is-2-desktop is-3-widescreen  has-order-1 column-left ">
    
        
<div class="card widget">
    <div class="card-content">
        <nav class="level">
            <div class="level-item has-text-centered" style="flex-shrink: 1">
                <div>
                    
                    <figure class="image is-128x128 has-mb-6">
                        <img class="is-rounded" src="/images/anna.jpg" alt="Anna">
                    </figure>
                    
                    <p class="is-size-4 is-block">
                        Anna
                    </p>
                    
                    
                    <p class="is-size-6 is-block">
                        Game Programmer
                    </p>
                    
                    
                    <p class="is-size-6 is-flex is-flex-center has-text-grey">
                        <i class="fas fa-map-marker-alt has-mr-7"></i>
                        <span>Shanghai,China</span>
                    </p>
                    
                </div>
            </div>
        </nav>
        <nav class="level is-mobile">
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Posts
                    </p>
                    <a href="/archives">
                        <p class="title has-text-weight-normal">
                            91
                        </p>
                    </a>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Categories
                    </p>
                    <a href="/categories">
                        <p class="title has-text-weight-normal">
                            21
                        </p>
                    </a>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Tags
                    </p>
                    <a href="/tags">
                        <p class="title has-text-weight-normal">
                            16
                        </p>
                    </a>
                </div>
            </div>
        </nav>
        
        <div class="level">
            <a class="level-item button is-link is-rounded" href="https://github.com/Keneyr" target="_blank" rel="noopener">
                Follow</a>
        </div>
        
        
        
    </div>
</div>
    
        

    <div class="card widget" id="toc">
        <div class="card-content">
            <div class="menu">
                <h3 class="menu-label">
                    Catalogue
                </h3>
                <ul class="menu-list"><li>
        <a class="is-flex" href="#WorkFlow">
        <span class="has-mr-6">1</span>
        <span>WorkFlow</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#Problem">
        <span class="has-mr-6">1.1</span>
        <span>Problem</span>
        </a></li><li>
        <a class="is-flex" href="#Inspiration">
        <span class="has-mr-6">1.2</span>
        <span>Inspiration</span>
        </a></li></ul></li><li>
        <a class="is-flex" href="#Methods">
        <span class="has-mr-6">2</span>
        <span>Methods</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#Basic-Motion-Matching">
        <span class="has-mr-6">2.1</span>
        <span>Basic Motion Matching</span>
        </a></li><li>
        <a class="is-flex" href="#Learned-Motion-Matching">
        <span class="has-mr-6">2.2</span>
        <span>Learned Motion Matching</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#Decompressor">
        <span class="has-mr-6">2.2.1</span>
        <span>Decompressor</span>
        </a></li><li>
        <a class="is-flex" href="#Stepper">
        <span class="has-mr-6">2.2.2</span>
        <span>Stepper</span>
        </a></li><li>
        <a class="is-flex" href="#Projector">
        <span class="has-mr-6">2.2.3</span>
        <span>Projector</span>
        </a></li></ul></li></ul></li></ul>
            </div>
        </div>
    </div>

    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Links
        </h3>
        <ul class="menu-list">
        
            <li>
                <a class="level is-mobile" href="https://www.youtube.com/@Gdconf/videos" target="_blank" rel="noopener">
                    <span class="level-left">
                        <span class="level-item">GDC</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">www.youtube.com</span>
                    </span>
                </a>
            </li>
        
            <li>
                <a class="level is-mobile" href="https://www.esports.net/" target="_blank" rel="noopener">
                    <span class="level-left">
                        <span class="level-item">Esports</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">www.esports.net</span>
                    </span>
                </a>
            </li>
        
            <li>
                <a class="level is-mobile" href="https://www.blender.org/" target="_blank" rel="noopener">
                    <span class="level-left">
                        <span class="level-item">blender</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">www.blender.org</span>
                    </span>
                </a>
            </li>
        
            <li>
                <a class="level is-mobile" href="https://dl.acm.org/topic/ccs2012/10010147.10010371.10010352" target="_blank" rel="noopener">
                    <span class="level-left">
                        <span class="level-item">acmLibrary</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">dl.acm.org</span>
                    </span>
                </a>
            </li>
        
            <li>
                <a class="level is-mobile" href="https://www.physicsbasedanimation.com/" target="_blank" rel="noopener">
                    <span class="level-left">
                        <span class="level-item">physicalAnimation</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">www.physicsbasedanimation.com</span>
                    </span>
                </a>
            </li>
        
            <li>
                <a class="level is-mobile" href="https://graphics.pixar.com/research/" target="_blank" rel="noopener">
                    <span class="level-left">
                        <span class="level-item">Pixar Studio</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">graphics.pixar.com</span>
                    </span>
                </a>
            </li>
        
            <li>
                <a class="level is-mobile" href="https://www.ubisoft.com/en-us/studio/laforge" target="_blank" rel="noopener">
                    <span class="level-left">
                        <span class="level-item">Ubisoft Studio</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">www.ubisoft.com</span>
                    </span>
                </a>
            </li>
        
            <li>
                <a class="level is-mobile" href="https://theorangeduck.com/" target="_blank" rel="noopener">
                    <span class="level-left">
                        <span class="level-item">Daniel Holden</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">theorangeduck.com</span>
                    </span>
                </a>
            </li>
        
            <li>
                <a class="level is-mobile" href="https://artanim.ch/" target="_blank" rel="noopener">
                    <span class="level-left">
                        <span class="level-item">artanim</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">artanim.ch</span>
                    </span>
                </a>
            </li>
        
            <li>
                <a class="level is-mobile" href="https://www.ode.org/" target="_blank" rel="noopener">
                    <span class="level-left">
                        <span class="level-item">ODE</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">www.ode.org</span>
                    </span>
                </a>
            </li>
        
            <li>
                <a class="level is-mobile" href="https://github.com/NVIDIAGameWorks/PhysX/tree/4.1" target="_blank" rel="noopener">
                    <span class="level-left">
                        <span class="level-item">PhysX</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">github.com</span>
                    </span>
                </a>
            </li>
        
            <li>
                <a class="level is-mobile" href="https://github.com/google-deepmind/mujoco" target="_blank" rel="noopener">
                    <span class="level-left">
                        <span class="level-item">mujoco</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">github.com</span>
                    </span>
                </a>
            </li>
        
            <li>
                <a class="level is-mobile" href="https://rodolphe-vaillant.fr/" target="_blank" rel="noopener">
                    <span class="level-left">
                        <span class="level-item">rodolphe</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">rodolphe-vaillant.fr</span>
                    </span>
                </a>
            </li>
        
            <li>
                <a class="level is-mobile" href="https://arrowinmyknee.com/" target="_blank" rel="noopener">
                    <span class="level-left">
                        <span class="level-item">arrowinmyknee</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">arrowinmyknee.com</span>
                    </span>
                </a>
            </li>
        
            <li>
                <a class="level is-mobile" href="https://www.3dgep.com/" target="_blank" rel="noopener">
                    <span class="level-left">
                        <span class="level-item">3dgep</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">www.3dgep.com</span>
                    </span>
                </a>
            </li>
        
            <li>
                <a class="level is-mobile" href="http://www.library.fudan.edu.cn/wjzx/2019njybgjskt/list1.htm" target="_blank" rel="noopener">
                    <span class="level-left">
                        <span class="level-item">excellentMathBooks</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">www.library.fudan.edu.cn</span>
                    </span>
                </a>
            </li>
        
            <li>
                <a class="level is-mobile" href="https://www.deeplearningbook.org/" target="_blank" rel="noopener">
                    <span class="level-left">
                        <span class="level-item">DeepLearningBook</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">www.deeplearningbook.org</span>
                    </span>
                </a>
            </li>
        
            <li>
                <a class="level is-mobile" href="http://dpkingma.com/" target="_blank" rel="noopener">
                    <span class="level-left">
                        <span class="level-item">Probability Model</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">dpkingma.com</span>
                    </span>
                </a>
            </li>
        
        </ul>
        </div>
    </div>
</div>

    
        
<div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                Categories
            </h3>
            <ul class="menu-list">
            <li>
        <a class="level is-marginless" href="/categories/CS/">
            <span class="level-start">
                <span class="level-item">CS</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">4</span>
            </span>
        </a><ul><li>
        <a class="level is-marginless" href="/categories/CS/Advanced-CPP/">
            <span class="level-start">
                <span class="level-item">Advanced CPP</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">3</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/CS/Algorithms/">
            <span class="level-start">
                <span class="level-item">Algorithms</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li></ul></li><li>
        <a class="level is-marginless" href="/categories/GameProgramming/">
            <span class="level-start">
                <span class="level-item">GameProgramming</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">4</span>
            </span>
        </a><ul><li>
        <a class="level is-marginless" href="/categories/GameProgramming/System/">
            <span class="level-start">
                <span class="level-item">System</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">4</span>
            </span>
        </a></li></ul></li><li>
        <a class="level is-marginless" href="/categories/Graphics/">
            <span class="level-start">
                <span class="level-item">Graphics</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">19</span>
            </span>
        </a><ul><li>
        <a class="level is-marginless" href="/categories/Graphics/Animation/">
            <span class="level-start">
                <span class="level-item">Animation</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">13</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Graphics/Geometry/">
            <span class="level-start">
                <span class="level-item">Geometry</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">3</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Graphics/Rendering/">
            <span class="level-start">
                <span class="level-item">Rendering</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">3</span>
            </span>
        </a></li></ul></li><li>
        <a class="level is-marginless" href="/categories/MachineLearning/">
            <span class="level-start">
                <span class="level-item">MachineLearning</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">14</span>
            </span>
        </a><ul><li>
        <a class="level is-marginless" href="/categories/MachineLearning/PatternRecognition/">
            <span class="level-start">
                <span class="level-item">PatternRecognition</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">14</span>
            </span>
        </a></li></ul></li><li>
        <a class="level is-marginless" href="/categories/Math/">
            <span class="level-start">
                <span class="level-item">Math</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">41</span>
            </span>
        </a><ul><li>
        <a class="level is-marginless" href="/categories/Math/Calculus/">
            <span class="level-start">
                <span class="level-item">Calculus</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">17</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Math/Linear-Algebra/">
            <span class="level-start">
                <span class="level-item">Linear Algebra</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">9</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Math/Numerical-Analysis/">
            <span class="level-start">
                <span class="level-item">Numerical Analysis</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">14</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Math/Variation/">
            <span class="level-start">
                <span class="level-item">Variation</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li></ul></li><li>
        <a class="level is-marginless" href="/categories/Paper/">
            <span class="level-start">
                <span class="level-item">Paper</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">9</span>
            </span>
        </a><ul><li>
        <a class="level is-marginless" href="/categories/Paper/Human-Pose/">
            <span class="level-start">
                <span class="level-item">Human Pose</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">2</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Paper/Motion-Control/">
            <span class="level-start">
                <span class="level-item">Motion Control</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Paper/Motion-Generation/">
            <span class="level-start">
                <span class="level-item">Motion Generation</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Paper/Sketch/">
            <span class="level-start">
                <span class="level-item">Sketch</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">5</span>
            </span>
        </a></li></ul></li>
            </ul>
        </div>
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Tag Cloud
        </h3>
        <a href="/tags/Algorithms/" style="font-size: 10px;">Algorithms</a> <a href="/tags/Animation/" style="font-size: 17.14px;">Animation</a> <a href="/tags/CPP/" style="font-size: 12.86px;">CPP</a> <a href="/tags/Calculus/" style="font-size: 20px;">Calculus</a> <a href="/tags/GameProgramming/" style="font-size: 14.29px;">GameProgramming</a> <a href="/tags/Geometry/" style="font-size: 12.86px;">Geometry</a> <a href="/tags/Human-Pose/" style="font-size: 11.43px;">Human Pose</a> <a href="/tags/Linear-Algebra/" style="font-size: 15.71px;">Linear Algebra</a> <a href="/tags/MachineLearning/" style="font-size: 18.57px;">MachineLearning</a> <a href="/tags/Motion-Control/" style="font-size: 10px;">Motion Control</a> <a href="/tags/Motion-Generation/" style="font-size: 10px;">Motion Generation</a> <a href="/tags/Numerical-Analysis/" style="font-size: 18.57px;">Numerical Analysis</a> <a href="/tags/Rendering/" style="font-size: 12.86px;">Rendering</a> <a href="/tags/Sketch/" style="font-size: 12.86px;">Sketch</a> <a href="/tags/Sketh/" style="font-size: 11.43px;">Sketh</a> <a href="/tags/Variation/" style="font-size: 10px;">Variation</a>
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Recent
        </h3>
        
        <article class="media">
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2024-02-21T07:49:31.000Z">2024-02-21</time></div>
                    <a href="/Paper/Motion-Control/Paper-Learned-Motion-Matching/" class="title has-link-black-ter is-size-6 has-text-weight-normal">Paper-Learned-Motion-Matching</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Paper/">Paper</a> / <a class="has-link-grey -link" href="/categories/Paper/Motion-Control/">Motion Control</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2024-01-22T04:29:46.000Z">2024-01-22</time></div>
                    <a href="/Paper/Human-Pose/Paper-MAPConNet-SelfSupervised-3D-Pose-Transfer-with-Mesh-and-Point-ConstrastiveLearning/" class="title has-link-black-ter is-size-6 has-text-weight-normal">Paper-MAPConNet-SelfSupervised-3D-Pose-Transfer-with-Mesh-and-Point-ConstrastiveLearning</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Paper/">Paper</a> / <a class="has-link-grey -link" href="/categories/Paper/Human-Pose/">Human Pose</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2023-12-28T04:27:50.000Z">2023-12-28</time></div>
                    <a href="/CS/Algorithms/Algorithms-C1-Foundations/" class="title has-link-black-ter is-size-6 has-text-weight-normal">Algorithms-C1-Foundations</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/CS/">CS</a> / <a class="has-link-grey -link" href="/categories/CS/Algorithms/">Algorithms</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2023-11-15T07:01:37.000Z">2023-11-15</time></div>
                    <a href="/Graphics/Animation/Animation-C14-Skinning/" class="title has-link-black-ter is-size-6 has-text-weight-normal">Animation-C14-Skinning</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Graphics/">Graphics</a> / <a class="has-link-grey -link" href="/categories/Graphics/Animation/">Animation</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2023-11-14T07:38:58.000Z">2023-11-14</time></div>
                    <a href="/Graphics/Animation/Animation-C13-Learning-based-Animation/" class="title has-link-black-ter is-size-6 has-text-weight-normal">Animation-C13-Learning-based-Animation</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Graphics/">Graphics</a> / <a class="has-link-grey -link" href="/categories/Graphics/Animation/">Animation</a>
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Archives
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2024/02/">
                <span class="level-start">
                    <span class="level-item">February 2024</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2024/01/">
                <span class="level-start">
                    <span class="level-item">January 2024</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2023/12/">
                <span class="level-start">
                    <span class="level-item">December 2023</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2023/11/">
                <span class="level-start">
                    <span class="level-item">November 2023</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">18</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2023/10/">
                <span class="level-start">
                    <span class="level-item">October 2023</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">51</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2023/09/">
                <span class="level-start">
                    <span class="level-item">September 2023</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">12</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2023/04/">
                <span class="level-start">
                    <span class="level-item">April 2023</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/04/">
                <span class="level-start">
                    <span class="level-item">April 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/03/">
                <span class="level-start">
                    <span class="level-item">March 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                Tags
            </h3>
            <div class="field is-grouped is-grouped-multiline">
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Algorithms/">
                        <span class="tag">Algorithms</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Animation/">
                        <span class="tag">Animation</span>
                        <span class="tag is-grey">13</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/CPP/">
                        <span class="tag">CPP</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Calculus/">
                        <span class="tag">Calculus</span>
                        <span class="tag is-grey">17</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/GameProgramming/">
                        <span class="tag">GameProgramming</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Geometry/">
                        <span class="tag">Geometry</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Human-Pose/">
                        <span class="tag">Human Pose</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Linear-Algebra/">
                        <span class="tag">Linear Algebra</span>
                        <span class="tag is-grey">9</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/MachineLearning/">
                        <span class="tag">MachineLearning</span>
                        <span class="tag is-grey">14</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Motion-Control/">
                        <span class="tag">Motion Control</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Motion-Generation/">
                        <span class="tag">Motion Generation</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Numerical-Analysis/">
                        <span class="tag">Numerical Analysis</span>
                        <span class="tag is-grey">14</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Rendering/">
                        <span class="tag">Rendering</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Sketch/">
                        <span class="tag">Sketch</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Sketh/">
                        <span class="tag">Sketh</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Variation/">
                        <span class="tag">Variation</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
            </div>
        </div>
    </div>
</div>
    
    
        <div class="column-right-shadow is-hidden-widescreen ">
        
        </div>
    
</div>

                
            </div>
        </div>
    </section>
    <footer class="footer">
    <div class="container">
        <div class="level">
            <div class="level-start has-text-centered-mobile">
                <a class="footer-logo is-block has-mb-6" href="/">
                
                    <img src="/images/beauty.jpg" alt="Paper-Learned-Motion-Matching" height="28">
                
                </a>
                <p class="is-size-7">
                &copy; 2024 Keneyr&nbsp;
                Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> & <a
                        href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a>
                
                <br>
                <span id="busuanzi_container_site_uv">
                Visited by <span id="busuanzi_value_site_uv">0</span> users
                </span>

                <span id="busuanzi_container_site_pv" class="theme-info">
                    | PageView: <span id="busuanzi_value_site_pv">span>
                    </span>

                
            <br><span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span>
                </p>
            </div>
            <div class="level-end">
            
                <div class="field has-addons is-flex-center-mobile has-mt-5-mobile is-flex-wrap is-flex-middle">
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/">
                        
                        <i class="fab fa-creative-commons"></i>
                        
                    </a>
                </p>
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/">
                        
                        <i class="fab fa-creative-commons-by"></i>
                        
                    </a>
                </p>
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                </p>
                
                </div>
            
            </div>
        </div>
    </div>
</footer>
<script>
    var now = new Date(); 
    function createtime() { 
        var grt= new Date("2/28/2020 12:49:00");//此处修改你的建站时间或者网站上线时间 
        now.setTime(now.getTime()+250); 
        days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days); 
        hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours); 
        if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum); 
        mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;} 
        seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum); 
        snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;} 
        document.getElementById("timeDate").innerHTML = "The site has been running "+dnum+" days "; 
        document.getElementById("times").innerHTML = hnum + " hours " + mnum + " minutes " + snum + " seconds"; 
    } 
setInterval("createtime()",250);
</script>

    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
<script>moment.locale("en");</script>


<script>
var IcarusThemeSettings = {
    site: {
        url: 'https://keneyr.com',
        external_link: {"enable":true,"exclude":[]}
    },
    article: {
        highlight: {
            clipboard: true,
            fold: 'unfolded'
        }
    }
};
</script>


<script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script>





<script src="/js/animation.js"></script>



<script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script>
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script>
<script src="/js/gallery.js" defer></script>



<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update
            my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        });
    });
</script>


<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    MathJax.Hub.Config({
        'HTML-CSS': {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
});
</script>


<a id="back-to-top" title="Back to Top" href="javascript:;">
    <i class="fas fa-chevron-up"></i>
</a>
<script src="/js/back-to-top.js" defer></script>














<script src="/js/main.js" defer></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="Type something..." />
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'Posts',
                PAGES: 'Pages',
                CATEGORIES: 'Categories',
                TAGS: 'Tags',
                UNTITLED: '(Untitled)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js" defer></script>
<link rel="stylesheet" href="/css/search.css">
<link rel="stylesheet" href="/css/insight.css">
    
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
<script type="text/javascript">
    var windowWidth = $(window).width();
    if (windowWidth > 480) {
      document.write('<script type="text/javascript" src="/js/src/snow.js"><\/script>');
    }
</script>  
</html>